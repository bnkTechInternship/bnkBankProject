<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 메뉴 추천</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="wScratchPad-master/wScratchPad.min.js"></script>    
    <script src="https://kit.fontawesome.com/5ea815c1d0.js"></script>
    <link rel = "stylesheet" href= "css/recommand.css">
</head>
<body>
    <!-- navbar -->
    <div id="mainNavbar" class = "bottom-shadow">
        <div id = "logo"></div>
    </div>
    
    <!-- 캔버스 태그 -->
    <div id="canvas"></div>

    <!-- 웨이팅 버튼 -->
    <div class="my-btn" onclick = "location.href = `/login.html/shop`">
        <div class="my-btn-border" onclick = "location.href = `/login.html/shop`"></div>
        <div onclick = "location.href = `/login.html/shop`">웨이팅 하러가기</div>
    </div>

    <!-- 스크래치 유도 태그1 -->
    <div id="tap">
      <img src = "img2/tap.png" class = "disappear">
    </div>
    
    <!-- 스크래치 유도 태그2 -->
    <div id = "content" class = "disappear">화면을 긁어보세요!</div>
</body>
<script>
    // scratch함수 script파일 분리하면
    // 적용 제대로 안되 직접 작성

    // 특정 사진으로 오늘의 메뉴 추천
    // 현재 이미지 파일들을 추후 데이터 분석 & 추천으로 변경
    let pics = ['#foo','img2/wallpaper3.jpg','img2/wallpaper4.jpg','img2/wallpaper5.jpg','img2/wallpaper6.jpg','img2/wallpaper7.jpg']
    let idx = 1;
    
    // 로고 클릭 (메인 연결)
    $('#logo').click(function(){
    	location.href = "/login.html/bank"
    })

    // 로딩시 이미지 세팅
    $(function() {
        scratch(pics[0],pics[idx])
    })

    // 긁는 애니메이션 세팅 함수
    function scratch(item1,item2) {
        $('#canvas').wScratchPad({
            size        : 160,
            scratchDown : scratch,
            bg          : item2,
            fg          : item1,
            scratchMove : function(e,percent) {
              $(".my-btn").css('opacity',0)
              $(".disappear").css('opacity',0)
            },
            scratchUp: function(e, percent)
            {
                if(percent > 50)
                {
                    $("#canvas").fadeOut()
                    setTimeout(() => {
                        $("#canvas").fadeIn('100')
                        $(".my-btn").css('opacity','1')
                    },1000)
                    $('#canvas').wScratchPad('reset');
                    $("#canvas").wScratchPad('fg',pics[idx])
                    $("#canvas").wScratchPad('bg',pics[++idx])
                    $(this).scratch = false;
                }
            }
        });
    }
</script>
</html>